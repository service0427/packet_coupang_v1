version: '3.8'

services:
  worker:
    build: .
    restart: unless-stopped
    network_mode: host  # localhost:8088 접근 위해 호스트 네트워크 사용
    environment:
      - PYTHONUNBUFFERED=1
    command: python3 work.py rank -p 5
    # 각 컨테이너가 5개 병렬 실행
    # scale로 컨테이너 수 조절: docker-compose up -d --scale worker=4
